<div class="modal fade" id="addDutyModal" tabindex="-1" aria-labelledby="addDutyModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-6" id="addDutyModalLabel"><i class="fa-solid fa-circle-plus"></i> {{lang.addNewDuty}}
        </h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="dutyAddForm">
          <div class="row">
            <div class="col-lg-6 col-md-6 col-xl-6 custom-select-wrapper modalSelect" style="font-size: 11px;">
              <label class="chooseLabel"><i class="fa-solid fa-list-check"></i> {{lang.dutyTitle}}</label>
              <input type="text" class="modal-input" class="form-control" formControlName="dutyTitle">
            </div>
            <div class="col-lg-6 col-md-6 col-xl-6 custom-select-wrapper modalSelect modal-right">
              <label class="chooseLabel"><i class="fa-solid fa-house icon-spacing icon-spacing"></i>
                {{lang.dutyTagName}}</label>
              <select class="form-select chooseSelect" aria-label="Default select example" formControlName="dutyTagId"
                style="font: small-caption !important;">
                <option value="" disabled selected>{{lang.chooseDutyTag}}</option>
                <option *ngFor="let tag of dutyTag" [value]="tag.id"> {{tag.tagName}}
                </option>
              </select>
            </div>
            <div class="col-lg-6 col-md-6 col-xl-6 custom-select-wrapper modalSelect" style="font-size: 11px;">
              <label class="chooseLabel"><i class="fa-solid fa-hourglass-start"></i> {{lang.startTime}}</label>
              <input type="time" class="modal-input" class="form-control" formControlName="startTime">
            </div>
            <div class="col-lg-6 col-md-6 col-xl-6 custom-select-wrapper modalSelect modal-right" style="font-size: 11px;">
              <label class="chooseLabel"><i class="fa-solid fa-hourglass-end"></i> {{lang.endTime}}</label>
              <input type="time" class="modal-input" class="form-control" formControlName="endTime">
            </div>
            <div class="col-lg-6 col-md-6 col-xl-6 custom-select-wrapper modalSelect ">
              <label class="chooseLabel"><i class="fa-solid fa-code-branch"></i> {{lang.branchName}}</label>
              <select class="form-select chooseSelect" aria-label="Default select example"
                (change)="onBranchChange($event)" style="font: small-caption !important;" formControlName="branchId">
                <option value="" disabled selected>{{lang.chooseBranch}}</option>
                <option *ngFor="let branch of branchs" [value]="branch.id"> {{branch.branchName}}
                </option>
              </select>
            </div>
            <div class="col-lg-6 col-md-6 col-xl-6 custom-select-wrapper modalSelect modal-right">
              <label class="chooseLabel"><i class="fa-regular fa-building"></i> {{lang.blockName}}</label>
              <select class="form-select chooseSelect" aria-label="Default select example" formControlName="blockId"
                (change)="onBlockChange($event)" style="font: small-caption !important;">
                <option value="" disabled selected>{{lang.chooseBlock}}</option>
                <option *ngFor="let block of blocks" [value]="block.id"> {{block.blockName}}
                </option>
              </select>
            </div>
            <div class="col-lg-6 col-md-6 col-xl-6 custom-select-wrapper modalSelect ">
              <label class="chooseLabel"><i class="fa-solid fa-door-open icon-spacing"></i> {{lang.floorName}}</label>
              <select class="form-select chooseSelect" aria-label="Default select example" formControlName="floorId"
                (change)="onFloorChange($event)" style="font: small-caption !important;">
                <option value="" disabled selected>{{lang.chooseFloor}}</option>
                <option *ngFor="let floor of floors" [value]="floor.id"> {{floor.floorName}}
                </option>
              </select>
            </div>
            <div class="col-lg-6 col-md-6 col-xl-6 custom-select-wrapper modalSelect modal-right">
              <label class="chooseLabel"><i
                  class="fa-solid fa-stairs icon-spacing icon-spacing"></i>{{lang.hallwayName}}</label>
              <select class="form-select chooseSelect" aria-label="Default select example" formControlName="hallwayId"
                (change)="onHallwayChange($event)" style="font: small-caption !important;">
                <option value="" disabled selected>{{lang.chooseHallway}}</option>
                <option *ngFor="let hallway of hallways" [value]="hallway.id"> {{hallway.hallwayName}}
                </option>
              </select>
            </div>
            <div class="col-lg-6 col-md-6 col-xl-6 custom-select-wrapper modalSelect ">
              <label class="chooseLabel"><i class="fa-solid fa-house icon-spacing icon-spacing"></i>
                {{lang.roomName}}</label>
              <select class="form-select chooseSelect" aria-label="Default select example" formControlName="roomId"
                style="font: small-caption !important;">
                <option value="" disabled selected>{{lang.chooseRoom}}</option>
                <option *ngFor="let room of rooms" [value]="room.id"> {{room.roomName}}
                </option>
              </select>
            </div>
            <div class="col-lg-6 col-md-6 col-xl-6 custom-select-wrapper modalSelect modal-right">
              <label class="chooseLabel"><i class="fa-solid fa-house icon-spacing icon-spacing"></i>
                {{lang.additionalTask}}</label>
              <select class="form-select chooseSelect" aria-label="Default select example" formControlName="taskId"
                style="font: small-caption !important;">
                <option value="" disabled selected>{{lang.chooseTask}}</option>
                <option *ngFor="let additionalTask of additionalTasks" [value]="additionalTask.id">
                  {{additionalTask.name}}
                </option>
              </select>
            </div>
            <div class="col-lg-6 col-md-6 col-xl-6 custom-select-wrapper modalSelect">
              <label class="chooseLabel"><i class="fa-solid fa-user"></i> {{lang.employeeName}}</label>
              <select class="form-select chooseSelect"  aria-label="Default select example" formControlName="employeeId">
                <option value="" disabled selected>{{lang.chooseEmployee}}</option>
                <option *ngFor="let employee of employees" [value]="employee.id">{{employee.name + " " +
                  employee.surname}}</option>
              </select>
            </div>
            <div class="col-lg-6 col-md-6 col-xl-6 custom-select-wrapper modalSelect" style="margin-top: 24px;">
              <button class="btn btn-sm" type="button"
                (click)="addEmployee()"><i class="fa-solid fa-user-plus" ></i> {{lang.addnewemployee}}
              </button>
            </div>
            
            <div class="col-lg-6 col-md-6 col-xl-6" *ngFor="let emp of employeelList; let i=index">
              <div class="task-number">
                <button class="delete-btn" type="button" (click)="removeEmployee(i)">
                  <div class="icon">
                    <i class="fas fa-trash-alt"></i>
                  </div>
                </button>
                <div class="name">
                  <label class="chooseLabel"><i class="fa-solid fa-user"></i> {{emp.name}} {{emp.surname}} </label>
                </div>
              </div>
            </div>
            
          </div>

          <div class="task-grp col-lg-6 col-md-6 col-xl-6 mt-4">
            <button class="btn btn-sm add-btn-grp" style="margin-left: 1%;padding: 2%;margin-bottom: 6px;" type="button"
              (click)="addTask()"> {{lang.addNewTask}} <i class="fa-solid fa-circle-plus"></i>
            </button>
          </div>

          <div formArrayName="task">
            <div *ngFor="let tasks of tasksArray.controls; let i=index" class="task-item">
             
              <div class="row">
                
                <div class="col-lg-6 col-md-6 col-xl-6 custom-select-wrapper modalSelect" [formGroupName]="i">
                  <label class="chooseLabel"><i class="fa-solid fa-tags"></i> {{lang.dutyTitle}}</label>
                  <input class="form-select forms chooseSelect detail" type="text" formControlName="taskName">
                </div>
                <div class="col-lg-6 col-md-6 col-xl-6 custom-select-wrapper modalSelect" [formGroupName]="i"
                  style="padding-right: 0px !important;">
                  <label class="chooseLabel"><i class="fa-solid fa-comment"></i> {{lang.dutyDescription}}</label>
                  <input class="form-select forms chooseSelect detail" type="text" formControlName="taskDescription">
                </div>
                <div class="col-lg-6 col-md-6 col-xl-6 custom-select-wrapper modalSelect "
                  [formGroupName]="i">
                  <label class="chooseLabel"><i class="fa-solid fa-building-user"></i> {{lang.departmentName}}</label>
                  <select class="form-select chooseSelect" aria-label="Default select example"
                    formControlName="departmentId">
                    <option value="" disabled selected>{{lang.chooseDepartment}}</option>
                    <option *ngFor="let department of departments" [value]="department.id">{{department.departmentName}}
                    </option>
                  </select>
                </div>
                <div class="col-lg-6 col-md-6 col-xl-6 task-delete">
                  <div class="task-number">
                    <span>
                      <button class="btn delete-btn" type="button" (click)="removeTask(i)">
                        <div class="icon">
                          <i class="fas fa-trash-alt"></i>
                        </div>
                        <span class="delete-text">{{dutyDelete}}</span>
                      </button>
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
        <div class="btn-location mt-4">
          <button class="button-37" (click)="addduty()" data-bs-dismiss="modal"><i class="fa-solid fa-circle-plus"></i>
            {{lang.addNewDuty}}</button>
        </div>
      </div>
    </div>
  </div>
</div>
<app-add-duty-tag (dutyTagEvent2)="getAllDutyTag()"></app-add-duty-tag>